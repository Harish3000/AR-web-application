<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Simple Animal AR</title>
    <!-- 1. A-Frame Core FIRST -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <!-- 2. AR.js for A-Frame - TRYING A DIFFERENT CDN / SOURCE -->
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.min.js"></script>
    <!-- 3. Your Custom Component Script AFTER AR.js -->
    <script>
      AFRAME.registerComponent("marker-debug", {
        init: function () {
          console.log(
            `[MARKER-DEBUG] Component initialized for marker: ${this.el.id}`
          );
          setTimeout(() => {
            if (this.el.components.marker) {
              console.log(
                `%c[MARKER-DEBUG] (Delayed Check) Marker component NOW found on ${
                  this.el.id
                }. Pattern URL: ${this.el.getAttribute("url")}`,
                "color: blue; font-weight: bold;"
              );
              console.log(
                `[MARKER-DEBUG] (Delayed Check) Marker component data:`,
                JSON.stringify(this.el.components.marker.data)
              );
            } else {
              console.warn(
                `%c[MARKER-DEBUG] (Delayed Check) Marker component STILL NOT found on ${this.el.id} after delay.`,
                "color: red; font-weight: bold;"
              );
            }
          }, 500); // Increased delay slightly to 500ms
        },
      });
    </script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body style="margin: 0px; overflow: hidden">
    <!-- ... rest of body ... -->
    <div id="landing-page"><!-- ... --></div>
    <div id="loader" class="loader-wrapper" style="display: none">
      <!-- ... -->
    </div>

    <div
      id="ar-container"
      style="
        display: none;
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
      "
    >
      <a-scene
        id="ar-scene"
        embedded
        arjs="sourceType: webcam; debugUIEnabled: true;"
        <!--
        Keep
        arjs
        properties
        simplified
        --
      >
        <!-- Add vr-mode-ui="enabled: false" to hide the VR goggles icon if it appears -->
        vr-mode-ui="enabled: false" >

        <!-- Bird Marker -->
        <a-marker
          id="marker-bird"
          type="pattern"
          url="markers/marker_bird.patt"
          marker-debug
        >
          <a-entity
            id="model-bird"
            gltf-model="url(assets/bird.glb)"
            scale="0.03 0.03 0.03"
            position="0 0.5 0"
            rotation="-90 0 0"
            animation="property: rotation; to: -90 360 0; loop: true; dur: 10000; easing: linear"
          ></a-entity>
        </a-marker>

        <!-- Dino Marker -->
        <a-marker
          id="marker-dino"
          type="pattern"
          url="markers/marker_dino.patt"
          marker-debug
        >
          <a-entity
            id="model-dino"
            gltf-model="url(assets/dino.glb)"
            scale="1 1 1"
            position="0 0.2 0"
            rotation="0 0 0"
            visible="true"
            animation__pos="property: position; to: 0 0.3 0; dir: alternate; loop: true; dur: 2000; easing: easeInOutSine"
            animation__rot="property: rotation; to: 0 360 0; loop: true; dur: 15000; easing: linear"
          ></a-entity>
        </a-marker>

        <a-entity camera></a-entity>
      </a-scene>
    </div>
    <script src="script.js"></script>
  </body>
</html>
