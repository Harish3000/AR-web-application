<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Simple Animal AR with MindAR</title>
    <!-- 1. A-Frame Core (Recent) -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <!-- 2. MindAR A-Frame (Image Tracking) -->
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

    <link rel="stylesheet" href="style.css" />
  </head>
  <body style="margin: 0px; overflow: hidden">
    <div id="landing-page">
      <div class="popup">
        <h1>Animal AR Experience</h1>
        <p>Enter the name of an animal to unlock:</p>
        <input
          type="text"
          id="passcode-input"
          placeholder="e.g., bird or dino"
        />
        <button id="enter-button">Enter AR</button>
        <p id="error-message" class="error"></p>
      </div>
    </div>

    <div id="loader" class="loader-wrapper" style="display: none">
      <div class="loader"></div>
      <p>Loading AR...</p>
    </div>

    <div
      id="ar-container"
      style="
        display: none;
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
      "
    >
      <!--
            MindAR Scene Setup:
            - mindar-image="imageTargetSrc: assets/targets.mind;"
            - The .mind file is a compiled target file generated from your marker images.
            - color-space, renderer, vr-mode-ui, device-orientation-permission-ui are common settings.
        -->
      <a-scene
        id="ar-scene"
        mindar-image="imageTargetSrc: assets/targets.mind; autoStart: false; uiScanning: #scanningUI; uiLoading: #loadingUI;"
        color-space="sRGB"
        renderer="colorManagement: true, physicallyCorrectLights"
        vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false"
        embedded
      >
        <!-- Camera - MindAR handles the AR camera setup internally -->
        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

        <!--
                MindAR Target Entities:
                - mindar-image-target="targetIndex: 0" (for the first image in targets.mind)
                - The content (model) goes inside this target entity.
            -->
        <a-entity id="target-dino" mindar-image-target="targetIndex: 0">
          <!-- Assuming dino is the first target -->
          <a-entity
            id="model-dino"
            gltf-model="url(assets/dino.glb)"
            scale="0.3 0.3 0.3"
            <!--
            Adjust
            as
            needed
            for
            MindAR
            scale
            --
          >
            position="0 0 0" rotation="0 0 0" animation__pos="property:
            position; to: 0 0.1 0; dir: alternate; loop: true; dur: 2000;
            easing: easeInOutSine" animation__rot="property: rotation; to: 0 360
            0; loop: true; dur: 15000; easing: linear" visible="false">
            <!-- Initially hidden, shown on target found -->
          </a-entity>
        </a-entity>

        <a-entity id="target-bird" mindar-image-target="targetIndex: 1">
          <!-- Assuming bird is the second target -->
          <a-entity
            id="model-bird"
            gltf-model="url(assets/bird.glb)"
            scale="0.01 0.01 0.01"
            <!--
            Adjust
            as
            needed
            for
            MindAR
            scale
            --
          >
            position="0 0 0" rotation="0 0 0" animation="property: rotation; to:
            0 360 0; loop: true; dur: 10000; easing: linear" visible="false">
            <!-- Initially hidden, shown on target found -->
          </a-entity>
        </a-entity>
      </a-scene>

      <!-- Optional MindAR UI Elements -->
      <div id="scanningUI" class="mindar-ui" style="display: none">
        <div class="scanning-overlay">
          <p>Scan Marker</p>
        </div>
      </div>
      <div id="loadingUI" class="mindar-ui" style="display: none">
        <div class="scanning-overlay">
          <p>Loading AR Engine...</p>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
